### 다소 불명확한 개념을 모델링 하는 법
모델링을 할때 명사와 동사만 생각해서 객체의 경계를 나누기는 쉽지 않다.
이런 명확하지 않은 상황에서 모델링할때 고려할 사항 세가지

#### 명시적 제약조건
- 불변객체 (immutable object) : 한번 생성되면 변경되지 객체로 외부에 조건에 의해서 변경되지 않는 객체(ex> ```String```, ```BigInteger```)
- 불변식 (invariant) : 예를 들어, "```Bucket``` 객체는 제한된 용량(capacity)를 초과해서 저장할 수 없다."와 같이 '
명확한 조건 범위가(변화하지 않는 조건을 갖는 객체나 현상) 존재하여 생성되는 객체를 의미 하며, 
이렇게 생성되는 객체가 무조건 불변 객체이거나 Value Object일 필요는 없다.

```java
// 첫 번째 코드
class Bucket{
    private float capacity;
    private float contents;
    
    public void pourIn(float addedVolume){
        if(contents + addedVolume > capacity){
            contents = capacity;
        }else{
            contents = contents + addedVolume;
        }
    }
}
```

> 이 경우에는 로직이 매우 단순하므로 규칙을 명확하게 식별할수 있다. 그러나 더 복잡한 클래스 안에 제약조건을 표현 할때는
> 부분을 파악하기 어려워질 것이다. 제약조건을 별도의 메서드로 분리하고 제약조건의 의미를 분명하고 명확하게 표현할 수 있게 메서드 이름을 짓자.
> 
> 도메인 주도 개발 p. 234

```java
// 두 번째 코드 : 제약조건을 좀더 명확히 분리함
class Bucket{
    private float capacity;
    private float contents;
    
    public void pourIn(float addedVolume){
        float volumePresent = contents + addedVolume;
        contents = constrainedToCapacity(volumePresent);
    }
    
    public float constrainedToCapacity(float volumePlacedIn){
        if( volumePlacedIn > capacity ) return capacity;
        return volumePlacedIn;
    }
}
```
위의 두 코드 모두 불변식을 통해 명확하게 제약조건을 강제 하지만, 두 번째 코드가 모델과의 관계(Model-Driven Design)를 좀더 명확히 표현한다.

#### 제약 조건을 잘못 포함한 경우 발생하는 문제
1. 제약조건을 평가하려면 해당 객체의 정의에 적합하지 않은 데이터가 필요
2. 관련된 규칙이 여러 객체에 걸쳐 나타나며, 동일한 계층 구조에 속하지 않는 객체 간에 중복 또는 상속 관계를 강요함
3. 설계와 요구사항에 관한 다양한 논의는 제약조건에 초점을 맞춰 이뤄지지만, 정작 구현단계에서는 절차적인 코드에 묻혀 명시적으로 표현되지 않음