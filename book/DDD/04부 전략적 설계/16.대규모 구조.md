### 발전하는 질서(Evolving Order)
> 문제는 참고할 규칙이 존재하느냐가 아니라 그러한 규칙이 얼마나 엄격하게 관리되고 어디에서 유래했느냐이다.
> 설계를 관장하는 규칙이 정말로 상황에 맞아떨어진다면 방해가 되지 않고 실질적으로 도움이 되는 방향으로 개발을 이끌 뿐 아니라 일관성을도 제공할수 있다.
>
> 그러므로,
>
> 이러한 개념적인 대규모 구조가 애플리케이션과 함께 발전하게 해서 발전 과정에서 전혀 다른 형식의 구조로도 변화할 수 있게 하라. 반드시 세부적인 지식을 토대로 내려야 할 세부적인 설계 및 모델과 관련된 의사 결정을 과도하게 제약해서는 안된다.
>
> 도메인 주도 개발 p.476

### 시스템 은유(System Metaphor)
> 어떤 시스템의 구체적인 비유가 나타난 팀원의 상상력을 포착하고 유용한 방향으로 사고를 이끄는 것으로 보인다면,
> 그것을 대규모 구조로 채택하라.
> 이러한 은유를 중심으로 설계를 구성하고 그것을 Ubiquitous Langauge로 흡수하라.
> System Metaphor는 시스템에 관한 의사소통을 촉진하고, 더불어 해당 시스템의 개발도 이끌 것이다.
> 이렇게 되면 시스템의 여러 부분과 심지어 여러 Bounded Context에 걸쳐 일관성이 증대된다.
> 그러나 모든 은유는 부정확하므로 지속적으로 은유가 지나치거나 적절치 못한가를 재점검하고, 방해가 된다면 언제든 버릴 준비를 하라.
>  
> 도메인 주도 개발 p.479

### 책임 계층(Responsibility Layer)
> 모델에 존재하는 개념적 의존성과 도메인의 여러 부분에 대한 다양한 변화율과 변화의 근원을 검토하라.
> 도메인에서 자연적인 층을 식별하면 그것을 광범위한 추상적 책임으로 간주하라.
> 이러한 책임은 시스템의 높은 수준에서의 목적과 설계 관한 이야기를 들려줄 것이다.
> Aggregate, Module과 같은 각 도메인 객체의 책임이 한 계층의 책임 안에서 말끔히 맞아떨어지도록 모델을 리팩터링하라.
>
> 도메인 주도 개발 p.483

#### 적절한 계층 선택
계층이 바뀌고 병합되고 나누고 재정의할 때, 지켜야 할 몇가지 유용한 특징은 다음과 같다.
- __스토리텔링__ : 계증은 도메인의 기본적인 실제 상황과 우선순위를 전해줘야 한다. 대규모 구조를 선택하는 것은 기술적 결저이라기보다는 업무와 관련된 모델링 결정이다. 계층은 업무의 우선순의를 드러내야 한다.
- __개념적 의존성__ : "상위" 계층에 있는 개념은 "하위" 계층을 배경으로 하는 의미를 지녀야 하고, 동시에 하위 계층의 개념은 독자적인 의미를 지녀야 한다.
- __Conceptual Contour__ : 다양한 계층에 놓인 객체가 변화율이나 변화의 근원이 서로 다르다면 계층은 그러한 객체 간에 구획을 짓는 일에 일조한다.
- __잠재기능__ : "무엇을 할수 있는가?" 인력을 포함한 조직과 그러한 자원을 구성하는 방식이 "잠재기능" 계층의 핵심이다.이 계층은 거의 모든 업무 도메인에서 인식할수 있지만 운송과 제조처럼 비교적 대규모 고정자본 투자가 선행돼야 가능한 사업 영역에서는 중요한 부분을 차지한다.
- __운영__ : "무엇이 행해지는가?" 운영과 관련된 객체가 잠재 기능과 관련된 객체를 참조하거나 심지어 잠재 기능과 관련된 객체로 구성되는 경우는 매우 흔한 일이지만 잠재 기능 관련 객체는 운영 계층을 참조해서는 안된다.
- __의사결정 지원__ : "어떤 행동을 취하고 어떤 정책을 수립해야 하는가?" 이 계층은 분석과 의사 결정을 위한 계층이다. 이 계층은 잠재 기능이나 운영과 같은 하위 계층에서 나온 정보를 분석한 내용을 기반으로 한다.
- __정책(Policy)__ : "규칙과 목표는 무엇인가?" 규칙과 목표는 대부분 수동적이나 다른 계층의 행위를 제약한다. 정책은 의사결정 지원 계층과 함께 잘 작동하는데, 의사 결정 지원 계층은 정책에 의해 수립되고, 정책에서 수립한 규칙의 제약을 받는 목표를 추구하는 수단을 제공한다.
- __계약(Commitment)__ : "우리가 약속한 바는 무엇인가?" 이 계층은 향후 운영 방향을 제시할 목표를 명시한다는 점에서 정책의 성격을 띠지만 계약이 진행 중인 업무 활동의 일부로 나타나 변화한다는 점에서 운영의 성격을 띠기도 한다.

> 계층화 시스템을 단순하게 유지하는 것이 가장 좋다. 계층이 네다섯 개를 넘어가면 다루기가 힘들어진다.
> 계층이 너무 많으면 이야기할 때 효과적이지 않고 대규모 구조가 풀어야 할 복잡성의 문제가 새로운 형태로 다시 나타나는 것과 같다.
> 대규모 구조의 시스템 일수록 철저하게 정제돼야 한다.
>
> 도메인 주도 개발 p.496

### 지식 수준(Knowledge Level)
Entity간의 역할과 관계가 각 상황마다 다양하게 작용하는 애플리케이션에서는 복잡성이 폭발적으로 증가할수 있다. 완전히 일반화된 모델이나 고도로 맞춤화가 가능한 모델도 사용자의 욕구를 충족하지 못한다. 결국 객체는 다양한 경우를 다루고자 다른 타입을 참조하거나, 아니면 각종 상황에서 여러 가지 방법으로 쓰일 속성을 갖게 된다. 데이터와 행위가 동일한 클래스가 단지 다양한 조립 규칙을 수용할 목적으로 크게 늘어날지도 모른다.

이와 같은 문제로 반영(Reflection) 패턴을 응용한 Knowledge Level 구성한다.

반영 패턴은 여러 소프트웨어 아키텍처와 기술적 인프라스트럭처에서 사용되며, Buschmann et al. 1996에 잘 설명돼 있다.
반영(Reflection) 패턴은 "자각적(self-aware)"으로 만들고 해당 소프트웨어의 구조와 행위에서 선택한 측명이 적응과 변화를 쉽게 수용하게끔 만들어 변화하는 요구에 부응한다. 이 패턴은 운영적 책임을 수행하는 "기반 수준(base level)"과 구조와 행위에 대한 지식을 나타내는 "메타수준(meta level)"으로 분리 된다.

그러므로,

기본적인 모델의 구조와 행위를 서술하고 제약하는 데 쓸수 있는 별도의 객체 집합을 만들어라.
이러한 관심사를 두가지 "수준"으로 분리해서 하나는 매우 구체적으로 만들고 다른 하나는 사용자나 관리자의 맞춤화가 가능한 규칙과 지식을 반영하게 만들어라.

### 착탈식 컴포넌트 프레임워크(Pluggable Component Framework)
인터페이스와 상호작용에 대한 Abstract Core를 정제하고 그러한 인터페이스의 다양한 구현이 자유롭게 대체될 수 있는 프레임워크를 만들어라. 이와 마찬가지로 컴포넌트가 Abstract Core의 인터페이스를 통해 정확히 작동하는 한 어떠한 애플리케이션에서도 그러한 컴포넌트를 사용할 수 있게 한다.
