## 05. 혼합된 데이터형을 ==로 비교하지 마라.
```javascript
'1.0e0' == { valueOf: function(){ return true; } }; // 결과값 : true
```
위의 표현식은 암묵적인 강제 형변환으로 인해, '1.0e0'과 valueOf가 비교 되기 전에, 문자열 '1.0e0'는 숫자 1로 파싱되고,
오른쪽 객체 역시 valueOf메소드가 호출된 결과 true가 다시 숫자로 1로 변환되어 1로 처리된다. 그래서, 1 == 1과 같은 결과가 출력되므로, true가 출력된다.

자바스크립트에서 값을 숫자로 명시적으로 변환하는 방법은 Number함수나 +연산자를 사용하면 된다.
이 + 연산자는 형변환 법칙을 기억하려고 애쓸 필요없이 어떤 변환이 적용되는지 정확하게 알수 있기 때문에 훨씬 깔끔하다. 

```javascript
+form.day.value; // 사용자가 입력필드에 입력한 값을 숫자 형식으로 변환함 

1 == + '1'; // true
```

#### ==연산자의 강제 형변환 규칙 ( A == B )
| 비교타입 A | 비교타입 B | 강제 형변환 |
| --- | --- | --- |
| null | undefined | 없음; 항상 true
| null 또는 undefined | null 또는 undefined이 아닌 다른 타입 | 없음; 항상 false |
| 원시 데이터형 문자열, 숫자 또는 boolean | Date 객체 | 원시 데이터형 => 숫자 Date 객체 => 원시 데이터형(toString 먼저 시도 후 valueOf) |
| 원시 데이터형 문자열, 숫자 또는 boolean | Date가 아닌 객체 | 원시 데이터형 => Date가 아닌 객체 => 원시 데이터형(valueOf먼저 시도 후 toString) |
| 원시 데이터형 문자열, 숫자 또는 boolean | 원시 데이터형 문자열, 숫자 또는 boolean  | 원시 데이터형 => 숫자 |


```javascript
var date = new Date('1999/12/31');
'1999/12/31' == date; // 결과값 : false

// 위 조건은 자바스크립트에서 아래와 같이 비교를 시도한다.
// date.toString()은 "Fri Dec 31 1999 00:00:00 GMT-0800 (PST)"를 리턴하기 때문에, 처리결과는 false
'1999/12/31' == date.toString(); 
```

일반 비교연산(==)은  위와 같이, 비교되는 대상에 따라 다른 비교 연산을 수행하기 때문에, 예기치 않은 결과가 나올 가능성이 크다.

명시적으로 형 변환을 하고, === 연산을 활용하여, 정확한 비교 연산을 수행하여, 예기치 않은 형변환 비교에 대응하는 코드를 작성하자.
```javascript
function toYMD(date){
	var y = date.getYear() + 1900, 
	    m = date.getMonth() + 1,
	    d = date.getDate();
	return y
	    + '/' + ( m < 10 ? '0' + m : m),
	    + '/' + ( d < 10 ? '0' + d : d);
}

'1999/12/31' === toYMD(date); // 결과값 : true;
```

> __기억할 점__ 
> * ==연산자는 인자들이 서로 다른 데이터형일 때, 일련의 혼동스러운 암묵적인 강제 형변환을 적용시킨다.
> * 비교가 어떠한 암묵적인 강제 형변환과도 연관이 없다는 사실을 코드를 읽는 사람에게 명확하게 전달하기 위해서 ===를 사용하라.
> * 비교할 값이 서로 다른 데이터형이라면 프로그램의 동작을 더 명백히 하기 위해 직접 명시적인 강제 형변환을 사용하라.