## 06. 세미콜론 삽입의 한계에 대해서 알아두자.
자동 세미콜론 삽입은 특정 문맥에서 생략된 세미콜론을 추론하여 프로그램을 파싱하는 기술로, 프로그램에 세미콜론을 자동으로 삽입해 준다. ECMAScript 표준은 세미콜론 삽입 메커니즘을 정확하게 기술하기 때문에, 선택적인 세미콜론은 자바스크립트 엔진들 사이에 상호호환된다.

#### 세미콜론 삽입 규칙
__[첫번째, 세미콜론은 한 줄 이상의 새로운 행이나, 프로그램 입력의 마지막이나 } 토근 전에만 삽입된다.]<br/>__
다르게 말하면 세미콜론은 줄의 마지막 부분, 블록의 마지막 부분, 또는 프로그램의 마지막 부분에서만 생략 가능하다.
```js
function square(x){
	var n = +x  // <- 자동 삽입
	return n *n // <- 자동 삽입
}


function area(r){ r = +r; return Math.PI * r * r // <- 자동 삽입 }

```


__[두번째, 세미콜론은 다음 입력 토근을 파싱할 수 없을 때에만 삽입된다.]<br/>__
다시 말해, 세미콜론 삽입은 오류 보정 메커니즘이다.

다음 선언의 시작 부분에 항상 주의해야 한다. 다음 줄의 초기 토근이 이전 선언의 연장선으로 해석될 수 있다면, 세미콜론을 생략해서는 안된다.<br/>
정확히 다섯개의 문자 ```(, [, +, -, /```를 조심해야 한다.

```js
// file1
;(function(){
  // .............
})()

// file2
;(function(){
  // .............
})()
```

여러 js파일을 병합할때, 위와 같이 ```;(function(){```로 선언하여 스크립트 병합으로 부터 보호 할수 있다.


자바스크립트는 파싱 오류로 판명되지 않더라도 강제적으로 세미콜론을 삽입하는 경우가 있다. 이것들은 소위 자바스크립트 문법의 제한된 생성(restricted production)이라고 부르는데, 두 토근 사이에 새로운 행이 허용되지 않는다는 의미이다.

강제적으로 세미콜론이 삽입되는 경우의 문법은 다음과 같다.

* ```return ```
* ```throw ```
* ```break ```
* ```continue ```
* ```++``` 또는 ```--```와 같이 연산자가 접미어로 붙는 경우
```
a
++
b
// a, ++b;로 해석됨
```

__[세 번째, 세미콜론은 for반복문의 구분자나 빈 선언문으로 절대 삽입되지 않는다.]<br/>__
for loop의 머리 부분에 반드시 명시적으로 세미콜론을 포함해야 한다는 뜻이다.
```js
for( var i = 0, total = 1 // 파싱 오류
		 i < n
		 i++ ){
		 total  *= i
		 
// 이와 비슷하게 본문이 비어 있는 loop도 명시적으로 세미콜론이 필요하다.
function infiniteLoop() { while(true) } // 파싱오류

// 아래와 같이 세미 콜론이 필요함
function infiniteLoop() { while(true); }

```
> __기억할 점__
> * 세미콜론은 ```}```앞이나 줄의 마지막 또는 프로그램의 마지막 전에만 추론되어 삽입된다.
> * 세미콜론은 다음 토근이 파싱될 수 없을 때에만 추론되어 삽입된다.
> * 선언문이 ```(, [, +, -, /```으로 시작할 때는 절대 세미콜론을 생략하면 안된다.
> * 스크립트를 병합할 때, 스크립트들 사이에 명시적으로 세미콜론을 삽입하라.
> * ```return, throw, break, continue, ++, --```바로 뒤에 새로운 행을 입력하지 마라.
> * ```for```반복문의 머리 부분에서는 세미콜론이 구분자 또는 빈 선언문으로도 절대 출론되어 삽입되지 않는다.