## 락
MySQL은 테이블, 행, 메타데이터의 세가지 락을 제공한다.
메타데이터 락은 MySQL 5.5이후 버전에서 새롭게 소게된 기능으로
메타데이터(CREATE, DROP, ALTER문등의 DDL문을 의미)적용시 테이블의 모든 메타데이터에 락을 건다.

### 테이블 락
테이블 락은 테이블 전체에 락을 건다.읽기 락이 걸리면 테이블에 쓸 수 없고 쓰기 락이 걸리면 테이블을 읽거나 쓸수 없다.

다음과 같이 ```SHOW PROCESSLIST```명령어로 현재 프로세스 상태를 확인할 수 있다.
```MySQL
[mysql]> SHOW PROCESSLIST\G
*************************** 1. row ***************************
      Id: 1311
    User: root
    Host: localhost
      db: test
 Command: Query
    Time: 35
   State: Locked
    Info: SELECT * FROM t
*************************** 2. row ***************************
      Id: 2312
    User: root
    Host: localhost
      db: test
 Command: Query
    Time: 36
   State: User sleep
    Info: UPDATE t SET a = sleep(200) WHERE a = 0
```
위와 같은 명령어를 통해 ```UPDATE t SET a = sleep(200) WHERE a = 0``` 문장이 36초 동안 실행을 대기하고 있음을 알수 있다.

각 요소별 설명은 다음과 같다.
- Id : MySQL 서버에서 실행되는 연결 스레드의 Id
- User, Host, db : 서버에 연결할 때 클라이언트가 지정한 연결 옵션들
- Command : 스레드에서 현재 실행되고 있는 명령
- Time : 스레드가 명령을 실행하기 시작한 후 지난 시간
- State : 스레드 내부 상태
- Info : 스레드가 현재 처리하고 있는 내용, 현재 쿼리를 실행하고 있으면 실행 중인 쿼리를 사용자의 입력을 기다르고 있는 중이면 NULL을 출력

동시에 수행되는 스레드들의 쿼리에 전체적으로 영향을 주고 있는 것으로 판단되면, ```SHOW PROCESSLIST```으로 상태를 확인하자.
